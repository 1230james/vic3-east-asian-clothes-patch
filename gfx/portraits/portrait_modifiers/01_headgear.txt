headgear = {
	usage = game
	selection_behavior = weighted_random
	fallback = no_headgear

    no_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = no_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }   
        weight = {
            base = 0
            modifier = {
                add = 90000
                scope:character ?= {
                    OR = {
                        has_role = agitator
                        has_template = fra_delescluze_character_template # Never ever give Louis Delescluze a hat, any hat. His forehead is too powerful.
                    }
                    is_historical = yes
                    NOR = {
                        has_template = rus_lenin_character_template
                        has_template = gbr_pankhurst_character_template
                        has_template = agitator_emiliano_zapata
                    }
                }
            }
        }
    }

### AGITATORS ###

    european_agitator_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_headgear_agitators
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                european_clothes_trigger = yes
                slavic_clothes_trigger = no
                south_american_clothes_character_trigger = no
                agitator_character_trigger = yes
            }
        }
    }

    south_american_agitator_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = south_american_headgear_agitators
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                south_american_clothes_character_trigger = yes
                OR = {
                    agitator_character_trigger = yes
                    scope:character ?= {
                        has_trait = bandit
                    }
                }
            }
        }
    }

    arabic_agitator_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = arabic_headgear_agitators
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 1000
                scope:character ?= {
                    culture = {
                        has_discrimination_trait = middle_eastern_heritage
                        NOT = { has_discrimination_trait = turkic }
                    }
                }
                agitator_character_trigger = yes
            }
        }
    }

    korean_agitator_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = korean_headgear_agitators
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                scope:character ?= {
                    culture = cu:korean
                }
                agitator_character_trigger = yes
            }
        }
    }

    japanese_agitator_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = japanese_headgear_agitators
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                japanese_clothes_trigger = yes
                agitator_character_trigger = yes
            }
        }
    }

### END OF AGITATORS. ###

### HISTORICAL CHARACTER CLOTHING ###

    historical_lenin_headgear = {
        dna_modifiers = {
            accessory = {
               mode = add
               gene = headgear
               template = slavic_headgear_agitator_lenin
               range = { 0 1.0 } 
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 90000
                scope:character ?= {
                    has_template = rus_lenin_character_template
                }
            }
        }
    }

    historical_emmeline_pankhurst_headgear = {
        dna_modifiers = {

           accessory = {
               mode = add
               gene = headgear
               template = female_headgear_agitator_pankhurst
               range = { 0 0.1 }
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 90000
                scope:character ?= {
                    has_template = gbr_pankhurst_character_template
                }
            }
        }
    }

    historical_zapata_headgear = {
        dna_modifiers = {
            accessory = {
               mode = add
               gene = headgear
               template = south_american_headgear_agitators
               range = { 0 0.1} 
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 90000
                scope:character ?= {
                    has_template = agitator_emiliano_zapata
                }
            }
        }
    }

### END OF HISTORICAL CLOTHING ###

    chinese_imperial_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_imperial_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
               add = 100
               chinese_imperial_clothes_trigger = yes
               EACP_unwesternized_trigger = yes # EACP
            }
            
            # EACP - Vanilla hat game rule
            modifier = {
                add = 1
                scope:character ?= {
                    chinese_imperial_clothes_trigger = yes
                    EACP_unwesternized_trigger = yes
                    has_game_rule = EACP_vanilla_chinese_emperor_hat_yes
                }
            }
        }
    }

    japanese_imperial_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = Japanese_imperial_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                japanese_imperial_clothes_trigger = yes
                EACP_unwesternized_trigger = yes # EACP
            }
        }
    }

    european_royal_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_royal_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
               add = 100
               european_clothes_trigger = yes
               monarchy_clothes_trigger = yes
            }
        }
    }

    european_common_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_common_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 10
                european_clothes_trigger = yes
                politician_clothes_trigger = yes
                armed_forces_clothes_trigger = no
            }
            modifier = {
                add = 90000
                scope:character ?= {
                    has_template = agitator_alfred_hugenberg
                }
            }
        }
    }

    indian_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = arabic_turban
                range = { 1 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 1000
                OR = {
                    AND = {
                        exists = scope:pop
                        scope:pop = {
                            religion = rel:sikh
                            NOT = { is_pop_type = clergymen }
                        }
                    }
                    AND = {
                        exists = scope:character
                        scope:character = {
                            religion = rel:sikh
                            NAND = {
                                is_ruler = yes
								exists = home_country
                                home_country = {
                                    has_law = law_type:law_monarchy
                                }
                            }
                        }
                    }
                    AND = {
                        indian_clothes_pop_trigger = yes
                        OR = {
                            soldier_clothes_pop_trigger = yes
                            officers_clothes_pop_trigger = yes
                        }
                    }
                }
            }
        }
    }

    indian_sikh_clergy_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = indian_common_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 1000
                exists = scope:pop
                scope:pop = {
                    religion = rel:sikh
                    is_pop_type = clergymen
                }
            }
        }
    }

    european_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_military_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                republic_clothes_trigger = no
                european_clothes_trigger = yes
                american_clothes_trigger = no
                british_empire_clothes_trigger = no
                french_empire_clothes_trigger = no
                german_clothes_trigger = no
                NOT = {
                    scope:character ?= {
						exists = home_country
                        home_country = {
                            c:CSA ?= this
                            is_subject = no
                        }
                    }
                }
                agitator_character_trigger = no
                OR = {
                    scope:character = {
                        has_role = general
                        is_ruler = no
                    }
                    AND = {
                        armed_forces_clothes_trigger = yes
                        politician_clothes_trigger = yes
                    }
                    officers_clothes_pop_trigger = yes
                }  
            }
        }
    }

    european_admiral_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_admiral_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                european_clothes_trigger = yes
                agitator_character_trigger = no
                OR = {
                    scope:character = {
                       has_role = admiral
                    }
                    scope:character = {
                        has_role = general
                        is_ruler = yes
						exists = home_country
                        home_country = {
                            NOT = { has_law = law_type:law_monarchy}
                        }
                    }
                }
            }
        }
    }

    american_military_headgear = {
        # when updating triggers on this, please update american_military_hairstyles in game\gfx\portraits\portrait_modifiers\01_headgear.txt as well so that triggers continue to match up
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = american_military_headgear
                range = { 0 0.8 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                american_clothes_trigger = yes
                agitator_character_trigger = no
                OR = {
                    scope:character = {
                        has_role = general
                    }
                    AND = {
                        politician_clothes_trigger = yes
                        armed_forces_clothes_trigger = yes
                    }
                }
            }
        }
    }

    american_military_late_headgear = {
        # when updating triggers on this, please update american_military_hairstyles in game\gfx\portraits\portrait_modifiers\01_headgear.txt as well so that triggers continue to match up
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = american_military_headgear
                range = { 0.9 1.0 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 150
                c:USA ?= {
                    has_technology_researched = bolt_action_rifles
                }
                OR = {
                    AND = {
                        american_clothes_pop_trigger = yes
                        OR = {
                            officers_clothes_pop_trigger = yes
                            soldier_clothes_pop_trigger = yes
                        }
                    }
                    AND = {
                        american_clothes_trigger = yes
                        agitator_character_trigger = no
                        scope:character = {
                            has_role = general
                        }
                    }
                }
            }
        }
    }

    american_confederate_military_headgear = {
        # when updating triggers on this, please update american_military_hairstyles in game\gfx\portraits\portrait_modifiers\01_headgear.txt as well so that triggers continue to match up
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = american_confederate_military_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                exists = c:CSA
                OR = {
                    AND = {
                        exists = scope:character
                        scope:character = {
                            has_role = general
							exists = home_country
                            home_country = c:CSA
                        }
                        agitator_character_trigger = no
                    }
                    AND = {
                        politician_clothes_trigger = yes
                        armed_forces_clothes_trigger = yes
                        scope:character = {
							exists = home_country
							home_country = c:CSA
						}
                        agitator_character_trigger = no
                    }
                    AND = {
                        exists = scope:pop
                        scope:pop = {
                            OR = {
                                is_pop_type = officers
                                is_pop_type = soldiers
                            }
                            home_country = c:CSA
                        }
                    }
                }
            }
        }
    }

    british_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = british_military_headgear
                range = { 0 0.5 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                british_empire_clothes_trigger = yes
                agitator_character_trigger = no
                OR = {
                    scope:character = {
                        has_role = general
                    }
                    AND = {
                        politician_clothes_trigger = yes
                        armed_forces_clothes_trigger = yes
                    }
                }
            }
        }
    }

    british_military_pupet_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_military_headgear
                range = { 0.7 0.7 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                british_empire_clothes_p_trigger = yes
                officers_clothes_pop_trigger  = yes
            }
        }
    }

    french_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = french_military_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                french_empire_clothes_trigger = yes
                OR = {
                    scope:character = {
                        has_role = general
                    }
                    AND = {
                        politician_clothes_trigger = yes
                        armed_forces_clothes_trigger = yes
                    }
                }
                agitator_character_trigger = no
            }
        }
    }

    garibaldi_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = french_military_headgear
                range = { 0.4 0.6 } # Only selecting the red kepi with gold embroidery
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 200
                scope:pop ?= {
                    home_country = {
                        any_scope_character = {
                            has_variable = garibaldi_var # Garibaldi can be an agitator or general or politician, it's all valid
                        }
                        OR = {
                            is_unification_candidate = ITA
                            AND = {
                                exists = c:ITA
                                c:ITA = this
                            }
                        }
                    }
                }
                OR = {
                    officers_clothes_pop_trigger = yes
                    soldier_clothes_pop_trigger = yes
                }
            }
        }
    }

    german_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = german_military_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                german_clothes_trigger = yes
                agitator_character_trigger = no
                OR = {
                    scope:character = {
                        has_role = general
                    }
                    AND = {
                        politician_clothes_trigger = yes
                        armed_forces_clothes_trigger = yes
                    }
                }
            }
        }
    }

    german_officers_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = german_military_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 1000
                german_clothes_pop_trigger = yes
                officers_clothes_pop_trigger = yes
            }
        }
    }

    ethiopian_royal_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = ethiopian_royal_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 1000
                ethiopian_clothes_trigger = yes
                agitator_character_trigger = no
                scope:character = {
                    is_ruler = yes
                }
            }
        }
    }

    indian_royal_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = indian_royal_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                indian_clothes_trigger = yes
                agitator_character_trigger = no
                scope:character = {
                    is_ruler = yes
                }
            }
        }
    }

    indian_high_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = indian_high_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 100
                indian_clothes_pop_trigger = yes
                upper_clothes_pop_trigger = yes
            }
        }
    }

    indian_clothes = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = indian_high_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }  
        weight = {
            base = 0
            modifier = {
                add = 100
                hindu_clothes_pop_trigger = yes
                clergy_clothes_pop_trigger = yes
            }
        }
    }

    arabic_turban = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = arabic_turban
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                arabic_clothes_trigger = yes
            }
        }
    }
    arabic_middle_tier = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = arabic_middle_tier
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 200
                AND = {
                    arabic_clothes_trigger = yes          
                }
            }
        }
    }
    arabic_fez = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = arabic_fez
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 200
                AND = {
                    arabic_clothes_trigger = yes
                    arabic_fez_trigger = yes
                }
            }
        }
    }
    african_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = african_common_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                scope:character ?= {
                    culture = {
                        OR = {
                            has_discrimination_trait = west_african_culture_group
                            has_discrimination_trait = east_african_culture_group
                        }
                        NOR = { 
                            has_discrimination_trait = ethiopian 
                            has_discrimination_trait = bantu
                            THIS = cu:maasai
                        }
                    }
                }
            }
        }
    }

#Pops

    arabic_low_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = arabic_low_tier
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                arabic_clothes_pop_trigger = yes
                poor_clothes_pop_trigger = yes
            }
        }
    }

    arabic_middle_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = arabic_middle_tier
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                arabic_clothes_pop_trigger = yes
            }
        }
    }

    central_asian_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = central_asian
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                central_asian_clothes_pop_trigger = yes
                upper_clothes_pop_trigger = yes             
            }
        }
    }

    mongol_noble_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = mongolian_hats
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                exists = scope:pop
                scope:pop = {
                    is_pop_type = aristocrats
                    culture = {
                        has_discrimination_trait = mongol_language
                    }
                }
            }
        }
    }

    chinese_common_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_common_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                chinese_manchu_queue_hairstyle_pops_trigger = yes
                poor_clothes_pop_trigger = yes
                
                # EACP - EAC triggers
                AND = {
                    east_asian_clothes_pop_trigger = yes
                    scope:pop ?= {
                        culture = {
                            NOT = { has_discrimination_trait = north_asian_heritage }
                        }
                    }
                }
                japanese_clothes_pop_trigger = no
                nougyou_clothes_trigger = yes
            }
        }
    }

    japanese_common_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = Japanese_common_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                japanese_clothes_pop_trigger = yes
                poor_clothes_pop_trigger = yes   
            }
        }
    }

    european_capitalist_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_tophat
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                OR = {
                    scope:character ?= {
                       has_variable = THE_NEFARIOUS_TOP_HAT
                    }
                    AND = {
                        OR = {
                            european_clothes_pop_trigger = yes
                            AND = {
                                exists = scope:pop
                                scope:pop = { 
                                    OR = {
                                        culture = cu:cherokee 
                                        culture = cu:muskogean
                                    }
                                }
                            }
                        }
                        upper_clothes_pop_trigger = yes
                    }
                }
            }
        }
    }

    european_bowler_hat = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_bowlerhat
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                european_clothes_pop_trigger = yes
                middle_clothes_pop_trigger = yes
               
           }
        }
    }

    european_flat_cap = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_flatcap
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                european_clothes_pop_trigger = yes
                poor_clothes_pop_trigger = yes
                peasants_clothes_pop_trigger = no
            }
        }
    }

    native_american_char_headgear_01 = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = native_american_common_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                native_american_clothes_trigger = yes
                ruler_clothes_trigger = yes
                scope:character = {
                    is_ruler = yes
                }
            }
        }
    }

    native_american_char_headgear_02 = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = american_military_headgear
                range = { 0 0.8 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 100
                native_north_american_clothes_trigger = yes
                ruler_clothes_trigger = yes
                scope:character = {
                    is_ruler = yes
                    is_female = no
                }
            }
        }
    }

    native_american_char_headgear_03 = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = native_american_high_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 1000
                ruler_clothes_trigger = yes
                scope:character = {
                    is_ruler = yes
                    OR = {
                        culture = cu:comanche
                        culture = cu:paiute
                        culture = cu:dakota
                        culture = cu:cree
                        culture = cu:nez_perce
                        culture = cu:siouan
                    }
                }
            }
        }
    }

    native_american_bandanna = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = native_american_common_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 100
                native_american_clothes_pop_trigger = yes   
            }
        }
    }

    arabic_military_fez = { # Excludes the fancy female headgear meant for high class pops
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = arabic_military_fez
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 200
                arabic_military_fez_pop_trigger = yes
                soldier_clothes_pop_trigger = yes
            }
        }
    }

    european_peasants_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_strawhat
                range = { 0 1 } # For the randomness to work correctly
           
            } 
        }
        weight = {
            base = 0
            modifier = {
                add = 200
                AND = {
                    peasants_clothes_pop_trigger = yes
                    european_clothes_pop_trigger = yes
                }
            }
        }
    }
    #academic_clothes = {
    #    dna_modifiers = {
    #        accessory = {
    #            mode = add
    #            gene = props
    #            template = academic_cap_01
    #            range = { 0 1 } # For the randomness to work correctly
    #        } 
    #    }
    #    weight = {
    #        base = 0
    #        modifier = {
    #            add = 200
    #            academics_clothes_pop_trigger = yes
    #        }
    #    }
    #}
    
### EACP - EAC Definitions ###
    
    chinese_imperial_headgear_warm = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_imperial_headgear_warm
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
               add = 99 # EACP - Down from 100 to let vanilla hat be the fallback selection
               chinese_imperial_clothes_trigger = yes
               EAC_character_cool_trigger = no
               EACP_unwesternized_trigger = yes
            }
            
            # EACP - Vanilla hat game rule
            modifier = {
                add = 2
                scope:character ?= {
                    chinese_imperial_clothes_trigger = yes
                    EACP_unwesternized_trigger = yes
                    has_game_rule = EACP_vanilla_chinese_emperor_hat_no
                }
            }
        }
    }

    chinese_imperial_headgear_cool = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_imperial_headgear_cool
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
               add = 99 # EACP - Down from 100 to let vanilla hat be the fallback selection
               chinese_imperial_clothes_trigger = yes
               EAC_character_cool_trigger = yes
               EACP_unwesternized_trigger = yes
            }
            
            # EACP - Vanilla hat game rule
            modifier = {
                add = 2
                scope:character ?= {
                    chinese_imperial_clothes_trigger = yes
                    EACP_unwesternized_trigger = yes
                    has_game_rule = EACP_vanilla_chinese_emperor_hat_no
                }
            }
        }
    }
    
    Japanese_imperial_headgear_ryuuei = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = Japanese_imperial_headgear_ryuuei
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                japanese_imperial_clothes_trigger = yes
                EACP_unwesternized_trigger = yes
            }
        }
    }
    
    mongolian_common_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = mongolian_common_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 100
                north_asian_clothes_pop_trigger = yes
                poor_clothes_pop_trigger = yes
            }
        }
    }

    vietnamese_common_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = vietnamese_common_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 100
                nougyou_clothes_trigger = no
                bureaucrats_clothes_pop_trigger = no
                officers_clothes_pop_trigger = no
                slaves_clothes_pop_trigger = no
                vietnamese_clothes_pop_trigger = yes
                # sla # EACP - wtf is this typo
                NAND = {
                    clergy_clothes_pop_trigger = yes
                    buddhist_clothes_pop_trigger = yes
                }
                EACP_unwesternized_trigger = yes
            }
            modifier = {
                add = 100
                EAC_republic_clothes_trigger = yes
                vietnamese_clothes_trigger = yes
                EACP_unwesternized_trigger = yes
            }
        }
    }

    chinese_common_headgear_kanemochi = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_common_headgear_kanemochi
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 100
                OR = {
#                    chinese_manchu_queue_hairstyle_character_trigger = yes
                    AND = {
                        chinese_manchu_queue_hairstyle_pops_trigger = yes
                        OR = {
                            upper_clothes_pop_trigger = yes
                            clergy_clothes_pop_trigger = yes
                            AND = {
                                middle_clothes_pop_trigger = yes
                                bureaucrats_clothes_pop_trigger = no
                            }
                        }
                        EACP_unwesternized_trigger = yes
                    }
                }
#                OR = {
#                    AND = {
#                        exists = scope:pop
#                        scope:pop = {
#                            OR = {
#                                middle_clothes_pop_trigger = yes
#                                upper_clothes_pop_trigger = yes        
#                                AND = {
#                                    buddhist_clothes_pop_trigger = yes
#                                    clergy_clothes_pop_trigger = yes
#                                }
#                            }
#                            chinese_clothes_pop_trigger = yes
#                        }
#                    }
#                    chinese_court_clothes_republic_trigger = yes
#                    chinese_imperial_clothes_republic_trigger = yes
#                }
            }
        }
    }

    chinese_foreign_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_foreign_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        
        # EACP - Replacing this westernization logic with AWC decision
        weight = {
            base = 0 
            #modifier = {
            #    add = 100
            #    OR = {
            #         
            #        AND = {
            #            chinese_clothes_pop_trigger = yes
            #            OR = {
            #                republic_of_china_trigger = yes
            #                overseas_eastasian_trigger = yes
            #                no_china_exist_trigger = yes
            #                AND = {
            #                    chinese_manchu_queue_hairstyle_pops_trigger = no
            #                    monarch_clothes_pop_trigger = no
            #                }
            #            }
            #            OR = {
            #                middle_clothes_pop_trigger = yes
            #                upper_clothes_pop_trigger = yes
            #                AND = {
            #                    confucianism_clothes_pop_trigger = yes
            #                    clergy_clothes_pop_trigger = yes
            #                }
            #            }
            #        }
            #        OR = {
            #            chinese_court_clothes_republic_trigger = yes
            #            chinese_imperial_clothes_republic_trigger = yes
            #            tibetan_character_clothes_trigger = yes
            #        }
            #    }
            #}
        }
    }

    chinese_court_headgear_warm_1 = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_court_headgear_01_1
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 2000
                EAC_character_cool_trigger = no
                EACP_unwesternized_trigger = yes
                OR = {
                    chinese_court_clothes_official_trigger_01 = yes
                    chinese_court_clothes_general_trigger_01 = yes
                    north_asian_court_clothes_trigger = yes
                    qing_subject_clothes_trigger = yes
                }
                scope:character = {
                    is_female = no
                }
            }
        }
    }

    chinese_court_headgear_warm_2 = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_court_headgear_01_2
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 100
                EAC_character_cool_trigger = no
                EACP_unwesternized_trigger = yes
                OR = {
                    chinese_court_clothes_official_trigger_02 = yes
                    chinese_court_clothes_general_trigger_02 = yes
                }
                scope:character = {
                    is_female = no
                }
            }
        }
    }

    chinese_court_headgear_warm_3 = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_court_headgear_01_3
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 100
                EAC_character_cool_trigger = no
                EACP_unwesternized_trigger = yes
                OR = {
                    chinese_court_clothes_official_trigger_03 = yes
                    chinese_court_clothes_general_trigger_03 = yes
                }
                scope:character = {
                    is_female = no
                }
            }
        }
    }

    chinese_court_headgear_warm_4 = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_court_headgear_01_4
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 100
                EAC_character_cool_trigger = no
                EACP_unwesternized_trigger = yes
                chinese_court_clothes_official_trigger_04 = yes
                scope:character = {
                    is_female = no
                }
            }
        }
    }

    chinese_court_headgear_warm_5 = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_court_headgear_01_5
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 100
                EAC_character_cool_trigger = no
                EACP_unwesternized_trigger = yes
                chinese_court_clothes_official_trigger_05 = yes
                scope:character = {
                    is_female = no
                }
            }
        }
    }

    chinese_court_headgear_cool_1 = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_court_headgear_02_1
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 2000
                EAC_character_cool_trigger = yes
                EACP_unwesternized_trigger = yes
                OR = {
                    chinese_court_clothes_official_trigger_01 = yes
                    chinese_court_clothes_general_trigger_01 = yes
                    north_asian_court_clothes_trigger = yes
                    qing_subject_clothes_trigger = yes
                }
                scope:character = {
                    is_female = no
                }
            }
        }
    }

    chinese_court_headgear_cool_2 = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_court_headgear_02_2
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 100
                EAC_character_cool_trigger = yes
                EACP_unwesternized_trigger = yes
                OR = {
                    chinese_court_clothes_official_trigger_02 = yes
                    chinese_court_clothes_general_trigger_02 = yes
                }
                scope:character = {
                    is_female = no
                }
            }
        }
    }

    chinese_court_headgear_cool_3 = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_court_headgear_02_3
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 100
                EAC_character_cool_trigger = yes
                EACP_unwesternized_trigger = yes
                OR = {
                    chinese_court_clothes_official_trigger_03 = yes
                    chinese_court_clothes_general_trigger_03 = yes
                }
                scope:character = {
                    is_female = no
                }
            }
        }
    }

    chinese_court_headgear_cool_4 = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_court_headgear_02_4
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 100
                EAC_character_cool_trigger = yes
                EACP_unwesternized_trigger = yes
                chinese_court_clothes_official_trigger_04 = yes
                scope:character = {
                    is_female = no
                }
            }
        }
    }

    chinese_court_headgear_cool_5 = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_court_headgear_02_5
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 100
                EAC_character_cool_trigger = yes
                EACP_unwesternized_trigger = yes
                chinese_court_clothes_official_trigger_05 = yes
                scope:character = {
                    is_female = no
                }
            }
        }
    }

    chinese_officer_headgear_warm = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_officer_headgear_01
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 1000000
                EAC_pop_cool_trigger = no
                EACP_unwesternized_trigger = yes
                chinese_qing_clothes_pop_trigger = yes
                OR = {
                    bureaucrats_clothes_pop_trigger = yes
                    officers_clothes_pop_trigger = yes
                    soldier_clothes_pop_trigger = yes
                }
            }
        }
    }

    chinese_officer_headgear_cool = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_officer_headgear_02
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 1000000
                EAC_pop_cool_trigger = yes
                EACP_unwesternized_trigger = yes
                chinese_qing_clothes_pop_trigger = yes
                OR = {
                    bureaucrats_clothes_pop_trigger = yes
                    officers_clothes_pop_trigger = yes
                    soldier_clothes_pop_trigger = yes
                }
            }
        }
    }

    chinese_imperial_headgear_ming = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_imperial_headgear_ming
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 1000
                EACP_unwesternized_trigger = yes
                OR = {
                    chinese_imperial_clothes_ming_trigger = yes
                    korean_imperial_clothes_trigger = yes
                }
            }
        }
    }

    chinese_king_headgear_ming = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_king_headgear_ming
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 1000
                EACP_unwesternized_trigger = yes
                OR = {
                    korean_king_clothes_trigger = yes
                    korean_prince_clothes_trigger = yes
                    chinese_prince_clothes_ming_trigger = yes
                    ming_subject_monarch_clothes_trigger = yes
                    chinese_king_clothes_ming_trigger = yes
                }
            }
        }
    }

    chinese_court_headgear_ming = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_court_headgear_ming
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 1000
                EACP_unwesternized_trigger = yes
                OR = {
                    chinese_court_clothes_official_ming_trigger_01 = yes
                    chinese_court_clothes_official_ming_trigger_02 = yes
                    chinese_court_clothes_official_ming_trigger_03 = yes
                    chinese_court_clothes_official_ming_trigger_04 = yes
                    chinese_court_clothes_official_ming_trigger_05 = yes
                    chinese_court_clothes_general_ming_trigger_00 = yes
                    chinese_court_clothes_general_ming_trigger_0102 = yes
                    chinese_court_clothes_general_ming_trigger_0304 = yes
                    ming_subject_clothes_trigger = yes
                }
            }
        }
    }

    vietnamese_imperial_headgear = {
       dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = vietnamese_imperial_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 100
                EACP_unwesternized_trigger = yes
                vietnamese_imperial_clothes_trigger = yes
                EACP_is_commander_trigger = no
            }
        }
    }

    korean_court_headgear = {
       dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = korean_osamo
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 1000
                EACP_unwesternized_trigger = yes
                EACP_is_commander_trigger = no
                OR = {
                    korean_court_clothes_trigger_01 = yes
                    korean_court_clothes_trigger_02 = yes
                    korean_court_clothes_trigger_03 = yes
                    korean_court_clothes_trigger_04 = yes
                }
            }
        }
    }

    vietnamese_court_headgear_official = {
       dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_court_headgear_ming
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 1000
                EACP_unwesternized_trigger = yes
                OR = {
                    vietnamese_court_clothes_official_trigger_01 = yes
                    vietnamese_court_clothes_official_trigger_02 = yes
                    vietnamese_court_clothes_official_trigger_03 = yes
                    vietnamese_court_clothes_official_trigger_04 = yes
                    vietnamese_court_clothes_official_trigger_05 = yes
                }
            }
        }
    }

    vietnamese_court_headgear_general = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = vietnamese_court_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 1000
                EACP_unwesternized_trigger = yes
                OR = {
                    vietnamese_court_clothes_general_trigger_0102 = yes
                    vietnamese_court_clothes_general_trigger_0304 = yes
                    AND = { # [EACP] No court clothing for commanders
                        vietnamese_clothes_trigger = yes
                        EACP_unwesternized_trigger = yes
                        EACP_is_commander_trigger = yes
                    }
                }
            }
        }
    }

    chinese_han_officer_headgear_01 = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_han_officer_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 1000
                EACP_unwesternized_trigger = yes
                chinese_ming_clothes_pop_trigger = yes
                soldier_clothes_pop_trigger = yes
            }
        }
    }

    chinese_han_common_headgear_01 = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_han_common_headgear_01
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 200
                EACP_unwesternized_trigger = yes
                OR = {
                    AND = {
                        vietnamese_nguyen_clothes_pop_trigger = yes
                        OR = {
                            bureaucrats_clothes_pop_trigger = yes
                            AND = {
                                clergy_clothes_pop_trigger = yes
                                confucianism_clothes_pop_trigger = yes
                            }
                        }
                    }
                    AND = {
                        chinese_ming_clothes_pop_trigger = yes
                        chinese_han_clothes_pop_trigger = yes
                        OR = {
                                academics_clothes_pop_trigger = yes
                            AND = {
                                clergy_clothes_pop_trigger = yes
                                confucianism_clothes_pop_trigger = yes
                            }
                        }
                    }
                }
            }
        }
    }

    chinese_han_common_headgear_02 = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_han_common_headgear_02
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 200
                EACP_unwesternized_trigger = yes
                OR = {
                    AND = {
                        vietnamese_nguyen_clothes_pop_trigger = yes
                        officers_clothes_pop_trigger = yes
                    }
                    AND = {
                        chinese_ming_clothes_pop_trigger = yes
                        OR = {
                            bureaucrats_clothes_pop_trigger = yes
                            officers_clothes_pop_trigger = yes
                        }
                    }
                }
            }
        }
    }

    chinese_han_common_headgear_02_baraeti = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = chinese_han_common_headgear_02_baraeti
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 200
                EACP_unwesternized_trigger = yes
                chinese_ming_clothes_pop_trigger = yes
                chinese_han_clothes_pop_trigger = yes
                OR = {
                    AND = {
                        upper_clothes_pop_trigger = yes
                        academics_clothes_pop_trigger = no
                    }
                    AND = {
                        middle_clothes_pop_trigger = yes
                        bureaucrats_clothes_pop_trigger = no
                    }
                }
            }
        }
    }

    korean_yangban_headgear = {    #추가댐!
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = korean_yangban_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 100
                EACP_unwesternized_trigger = yes
                OR = {
                    korean_yangban_clothes_trigger = yes
                    AND = {
                        EAC_republic_clothes_trigger = yes
                        korean_clothes_trigger = yes
                    }
                }
            }
        }
    }
    
    korean_soldier_headgear = {    #추가댐!
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = korean_soldier_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 1000
                EACP_unwesternized_trigger = yes
                soldier_clothes_pop_trigger = yes
                # korean_ri_clothes_pop_trigger = yes # EACP - Always use jeollip for unwesternized
                scope:pop ?= { # EACP - replacement Korea check
                    owner = {
                        country_has_primary_culture = cu:korean
                    }
                }
            }
        }
    }
    
    korean_general_headgear = {    #추가댐!
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = korean_general_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }

        weight = {
            base = 0
            modifier = {
                add = 1000
                EACP_unwesternized_trigger = yes
                OR = {
                    AND = {
                        exists = scope:pop
                        officers_clothes_pop_trigger = yes
                        # korean_ri_clothes_pop_trigger = yes # EACP - Always use jeollip for unwesternized
                        scope:pop ?= { # EACP - replacement Korea check
                            owner = {
                                country_has_primary_culture = cu:korean
                            }
                        }
                    }
                    AND = {
                        scope:character ?= {
                            OR = {
                                has_role = general
                                has_role = admiral
                            }
                            owner = {
                                country_has_primary_culture = cu:korean
                            }
                        }
                    }
                }
            }
        }
    }
    
### EACP - WCR Definitions ###
    
    ## WCR - Fixes ##
    
    WCR_academic_clothes = { # this was such a simple fix; idk why they didnt just do it
        dna_modifiers = {    # better open a half-point story up on the agile board :kekw:
            accessory = {
                mode = add
                gene = headgear         # according to the PE, it's in headgear, not in props
                template = academic_cap # and it's called academic_cap, not academic_cap_01
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 200
                academics_clothes_pop_trigger = yes
                WCR_is_westernized_trigger    = yes # want to include Europe & co. too in this case
            }
            modifier = {   # Nondisruptive (for Europeans) way to apply it to nations that finished westernization
                add = 1900 # (i.e. Europe gets the normal weight & Asia, etc. get 2100 to match other WCR definitions
                academics_clothes_pop_trigger = yes
                WCR_has_completed_westernization_trigger = yes
            }
        }
    }
    
    ## WCR - Additions ##
    
    WCR_european_royal_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_royal_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2000
                WCR_has_completed_westernization_trigger = yes
                monarchy_clothes_trigger = yes
            }
            modifier = { # Try to guarantee queen's crown
                add = 100
                WCR_has_completed_westernization_trigger = yes
                monarchy_clothes_trigger = yes
                scope:character ?= {
                    is_female = yes
                }
            }
        }
    }
    
    WCR_european_common_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_common_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2000
                WCR_has_completed_westernization_trigger = yes
                politician_clothes_trigger = yes
                armed_forces_clothes_trigger = no
                monarchy_clothes_trigger = no
                scope:character ?= {
                    age > 12
                }
            }
        }
    }
    
    WCR_european_capitalist_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_tophat
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2000
                WCR_has_completed_westernization_trigger = yes
                upper_clothes_pop_trigger = yes
            }
        }
    }
    
    WCR_european_bowler_hat = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_bowlerhat
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2000
                WCR_has_completed_westernization_trigger = yes
                middle_clothes_pop_trigger = yes
           }
        }
    }
    
    WCR_european_flat_cap = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_flatcap
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100 # 2000 # Leave at 100 so laborers have flatcaps or their culturally-relevant hats
                WCR_has_completed_westernization_trigger = yes
                poor_clothes_pop_trigger = yes
                peasants_clothes_pop_trigger = no
            }
            modifier = {
                add = 1900
                WCR_has_completed_westernization_trigger = yes
                OR = { # But always give westernized machinists the flat cap
                    machinists_clothes_pop_trigger = yes
                    AND = { # and guarantee flat cap if fully westernize poor pops game rule is set
                        poor_clothes_pop_trigger = yes
                        peasants_clothes_pop_trigger = no
                        has_game_rule = WCR_westernize_poor_pop_clothing_yes
                    }
                }
            }
        }
    }
    
    WCR_european_peasants_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_strawhat
                range = { 0 1 } # For the randomness to work correctly
           
            } 
        }
        weight = {
            base = 0
            modifier = {
                add = 100 # 2000 # Leave at 100 for same reason as flat cap
                WCR_has_completed_westernization_trigger = yes
                peasants_clothes_pop_trigger = yes
            }
            modifier = {
                add = 1900 # Guarantee straw hat if fully westernize poor pops game rule is set
                WCR_has_completed_westernization_trigger = yes
                peasants_clothes_pop_trigger = yes
                has_game_rule = WCR_westernize_poor_pop_clothing_yes
            }
        }
    }
    
    WCR_european_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = german_military_headgear # peaked caps only # european_military_headgear
                range = { 0 0.5 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2100
                agitator_character_trigger = no
                soldier_clothes_pop_trigger = no
                WCR_has_completed_westernization_trigger = yes
                WCR_army_clothes_trigger = yes
                WCR_army_has_no_influence_trigger = yes
            }
            modifier = { # Monarchy commanders in chief
                add = 2100
                monarchy_clothes_trigger = yes
                WCR_ruler_has_no_influence_trigger = yes
                scope:character ?= {
                    is_ruler = yes
                    has_role = general
                }
            }
        }
    }
    
    WCR_european_admiral_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_admiral_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2100
                agitator_character_trigger = no
                soldier_clothes_pop_trigger = no
                WCR_has_completed_westernization_trigger = yes
                WCR_navy_clothes_trigger = yes
                # WCR_navy_has_no_influence_trigger = yes # Hat is same for all flavors
            }
            modifier = { # Republic commanders in chief
                add = 2100
                republic_clothes_trigger = yes
                # WCR_ruler_has_no_influence_trigger = yes # Hat is same for all flavors
                scope:character ?= {
                    is_ruler = yes
                    has_role = general
                }
            }
        }
    }
    
    WCR_american_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = american_military_headgear
                range = { 0 0.6 } # 0.6 is upper limit for not having cowboy hats
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2100
                agitator_character_trigger = no
                soldier_clothes_pop_trigger = no
                WCR_has_completed_westernization_trigger = yes
                WCR_army_clothes_trigger = yes
                WCR_army_has_american_influence_trigger = yes
            }
            modifier = {
                add = 2100
                monarchy_clothes_trigger = yes
                WCR_ruler_has_american_influence_trigger = yes
                scope:character ?= {
                    is_ruler = yes
                    has_role = general
                }
            }
        }
    }
    
    WCR_british_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = british_military_headgear
                range = { 0 0.5 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2100
                agitator_character_trigger = no
                soldier_clothes_pop_trigger = no
                WCR_has_completed_westernization_trigger = yes
                WCR_army_clothes_trigger = yes
                WCR_army_has_british_influence_trigger = yes
            }
            modifier = {
                add = 2100
                monarchy_clothes_trigger = yes
                WCR_ruler_has_british_influence_trigger = yes
                scope:character ?= {
                    is_ruler = yes
                    has_role = general
                }
            }
        }
    }
    
    WCR_french_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = french_military_headgear
                range = { 0 0.5 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2100
                agitator_character_trigger = no
                soldier_clothes_pop_trigger = no
                WCR_has_completed_westernization_trigger = yes
                WCR_army_clothes_trigger = yes
                WCR_army_has_french_influence_trigger = yes
            }
            modifier = {
                add = 2100
                monarchy_clothes_trigger = yes
                WCR_ruler_has_french_influence_trigger = yes
                scope:character ?= {
                    is_ruler = yes
                    has_role = general
                }
            }
        }
    }
    
    WCR_german_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = german_military_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2100
                agitator_character_trigger = no
                soldier_clothes_pop_trigger = no
                WCR_has_completed_westernization_trigger = yes
                WCR_army_clothes_trigger = yes
                WCR_army_has_german_influence_trigger = yes
            }
            modifier = {
                add = 2100
                monarchy_clothes_trigger = yes
                WCR_ruler_has_german_influence_trigger = yes
                scope:character ?= {
                    is_ruler = yes
                    has_role = general
                }
            }
        }
    }
    
}
